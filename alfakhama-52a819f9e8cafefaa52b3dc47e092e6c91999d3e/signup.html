<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تسجيل الدخول / إنشاء حساب</title>
    <!-- Add to ALL HTML files -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Keep your existing custom CSS */
        @import url('style.css');
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Cairo', sans-serif;
            background-color: #f0f0f0;
            direction: rtl;
        }

        .top-bar {
            background-color: #fff;
            padding: 10px 20px;
            text-align: left;
        }

        .top-bar select {
            padding: 6px 12px;
            border-radius: 5px;
            font-size: 14px;
        }

        .search-section {
            padding: 40px;
            background: linear-gradient(to right, #4a90e2, #0077c2);
            min-height: 100vh;
            color: white;
        }

        .search-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            color: black;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            margin: auto;
        }

        .search-box input,
        .search-box label {
            width: 100%;
        }

        .search-box input {
            padding: 10px;
            font-size: 16px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        .search-box button {
            padding: 10px 20px;
            background: #0077c2;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
        }

        h2 {
            text-align: center;
            color: #0077c2;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>

    <div class="top-bar">
        <label for="lang">اللغة:</label>
        <select id="lang" onchange="switchLang()">
            <option value="ar">العربية</option>
            <option value="en">English</option>
        </select>
    </div>

    <div class="search-section">
        <div class="search-box">
            <h2 id="formTitle" data-ar="إنشاء حساب" data-en="Create Account">إنشاء حساب</h2>

            <!-- Sign Up Form -->
            <form id="userForm">
                <label data-ar="رقم الهوية/الجواز" data-en="National ID Number"></label>
                <input type="text" id="NatPas_Num" required placeholder="National ID Number" />

                <label data-ar="الاسم الكامل" data-en="Full Name"></label>
                <input type="text" id="Cus_Full_Name" required placeholder="Full Name" />

                <label data-ar="كلمة المرور" data-en="Password"></label>
                <input type="password" id="Password" required placeholder="Password" />

                <label data-ar="تأكيد كلمة المرور" data-en="Confirm Password"></label>
                <input type="password" id="Confirm_Password" required placeholder="Confirm Password" />

                <button type="submit">تسجيل</button>
            </form>


            <!-- Login Form -->
            <form id="loginUserForm" class="hidden">
                <label data-ar="رقم الهوية/الجواز" data-en="National ID Number"></label>
                <input type="text" id="NatPas_Num_Login" required placeholder="National ID Number" />

                <label data-ar="كلمة المرور" data-en="Password"></label>
                <input type="password" id="Password_Login" required placeholder="Password" />

                <button type="submit">تسجيل دخول</button>
            </form>


            <button id="toggleBtn">التحويل لتسجيل الدخول</button>
            <button id="createAccountBtn" class="hidden">إنشاء حساب</button>
        </div>
    </div>

    <!-- ✅ SCRIPT -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            switchLang();

            const users = JSON.parse(localStorage.getItem("users")) || [];

            // Switch Forms
            document.getElementById("toggleBtn").addEventListener("click", () => {
                document.getElementById("userForm").classList.add("hidden");
                document.getElementById("loginUserForm").classList.remove("hidden");
                document.getElementById("toggleBtn").classList.add("hidden");
                document.getElementById("createAccountBtn").classList.remove("hidden");
                document.getElementById("formTitle").textContent = "تسجيل دخول";
            });

            document.getElementById("createAccountBtn").addEventListener("click", () => {
                document.getElementById("loginUserForm").classList.add("hidden");
                document.getElementById("userForm").classList.remove("hidden");
                document.getElementById("createAccountBtn").classList.add("hidden");
                document.getElementById("toggleBtn").classList.remove("hidden");
                document.getElementById("formTitle").textContent = "إنشاء حساب";
            });

            // Sign Up
            document.getElementById("userForm").addEventListener("submit", (e) => {
                e.preventDefault();
                const id = document.getElementById("NatPas_Num").value.trim();
                const name = document.getElementById("Cus_Full_Name").value.trim();
                const pass = document.getElementById("Password").value;
                const confirm = document.getElementById("Confirm_Password").value;

                if (pass !== confirm) return alert("كلمات المرور غير متطابقة");

                const exists = users.find(user => user.id === id);
                if (exists) return alert("المستخدم موجود بالفعل");

                const newUser = { id, name, pass };
                users.push(newUser);
                localStorage.setItem("users", JSON.stringify(users));
                localStorage.setItem("loggedInUser", JSON.stringify(newUser));
                alert("تم إنشاء الحساب بنجاح!");
                window.location.href = "index.html";
            });

            // Login
            document.getElementById("loginUserForm").addEventListener("submit", (e) => {
                e.preventDefault();
                const id = document.getElementById("NatPas_Num_Login").value.trim();
                const pass = document.getElementById("Password_Login").value;

                const found = users.find(user => user.id === id && user.pass === pass);
                if (!found) return alert("بيانات الدخول غير صحيحة");

                localStorage.setItem("loggedInUser", JSON.stringify(found));
                alert(`مرحبًا ${found.name}!`);
                window.location.href = "index.html";
            });
        });

        function switchLang() {
            const lang = document.getElementById("lang").value;
            const labels = {
                ar: {
                    formTitle: "إنشاء حساب",
                    toggle: "التحويل لتسجيل الدخول",
                    create: "إنشاء حساب",
                    signUp: "تسجيل",
                    login: "تسجيل دخول"
                },
                en: {
                    formTitle: "Create Account",
                    toggle: "Switch to Login",
                    create: "Create Account",
                    signUp: "Sign Up",
                    login: "Login"
                }
            };

            const texts = labels[lang];
            document.getElementById("formTitle").textContent = texts.formTitle;
            document.getElementById("toggleBtn").textContent = texts.toggle;
            document.getElementById("createAccountBtn").textContent = texts.create;
            document.querySelector("#userForm button").textContent = texts.signUp;
            document.querySelector("#loginUserForm button").textContent = texts.login;

            document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
        }
    </script>
    <!-- Add to ALL HTML files -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>